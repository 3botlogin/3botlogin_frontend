<section class="register">
  <v-layout justify-center>
    <v-flex md8>
      <v-card>
        <v-toolbar class="primary">
          <h1 class="headline white--text text-xs-center fw">
            Registration
          </h1>
        </v-toolbar>
        <v-stepper v-model="step">
          <v-stepper-header class="elevation-0">
            <v-stepper-step color="accent" :complete="step > 1" step="1">Personal info</v-stepper-step>
            <v-divider></v-divider>
            <v-stepper-step color="accent" :complete="step > 2" step="2">Your key</v-stepper-step>
            <v-divider></v-divider>
            <v-stepper-step color="accent" step="3">Finishing</v-stepper-step>
          </v-stepper-header>
          <v-stepper-items>
            <v-stepper-content step="1">
              <v-form v-model="valid" @submit.prevent='valid ? step++ : null'>
                <p class="title">Tell me more about yourself</p>
                <v-text-field box label="Double name" disabled v-model="doubleName"/>
                <v-text-field autofocus box label="Email" type="email" v-model="email" required :rules="emailRules"/>
                <v-text-field placeholder="NOT IMPLEMENTED YET" disabled box label="Location"/>
                <v-layout>
                  <v-spacer />
                  <v-btn :disabled="!valid" color="primary" type="submit">
                    Continue
                  </v-btn>
                </v-layout>
              </v-form>
            </v-stepper-content>
            <v-stepper-content step="2">
              <p class="title">This will be your (little) secret</p>
              <p class="subheading">
                Please write this on a piece of paper and keep it in a secure place. <br>
                This is the only time you'll see this.
              </p>
              <v-textarea :class="!alone ?  'notAlone' : ''" readonly v-model="keys.phrase" box label="Key">
              </v-textarea>
              <v-switch v-model="alone" label="I'm alone, show me my phrase." class="mt-0 ml-2"></v-switch>

              <v-layout>
                <v-spacer />
                <v-btn color="primary" @click="areYouSureDialog = true">
                <!-- <v-btn color="primary" @click="proceed"> -->
                  Continue
                </v-btn>
              </v-layout>
            </v-stepper-content>
            <v-stepper-content step="3">
              <v-layout justify-center>
                <div class="text-xs-center">
                  <vue-qr :text="qrText" @click="openApp"></vue-qr>
                  <p>Scan this QR with the 3Bot app to finish registration.</p>
                  <div :class="didLeavePage ? 'accent' : 'error'">Did leave page</div>
                  <div :class="rechecked ? 'accent' : 'error'">Rechecked</div>
                </div>
              </v-layout>
            </v-stepper-content>
          </v-stepper-items>
        </v-stepper>
      </v-card>
    </v-flex>
  </v-layout>

  <v-dialog v-model="areYouSureDialog" width="700">
    <v-card>
      <v-toolbar class="primary">
        <h1 class="headline white--text text-xs-center fw">
          Are you sure
        </h1>
      </v-toolbar>
      <v-card-text>
        <p class="subheading">Are you sure you've written it down?</p>
        <p class="subheading">This is the only time you'll get to see this.</p>
      </v-card-text>
      <v-card-actions>
        <v-spacer />
        <v-btn flat @click="areYouSureDialog = false">Cancel</v-btn>
        <v-btn flat @click="confirmDialog">Yup</v-btn>
      </v-card-actions>
    </v-card>
  </v-dialog>

  <v-dialog v-model="youWereNeverAloneDialog" width="500">
    <v-card>
      <v-toolbar class="primary">
        <h1 class="headline white--text text-xs-center fw">
          No you didn't
        </h1>
      </v-toolbar>
      <v-card-text>
        <p>You were never alone, how did you do it?</p>
        <v-switch v-model="proceedAnyway" label="I understand that I won't be able to recover my account without this, but I like living on the edge."></v-switch>
      </v-card-text>
      <v-card-actions>
        <v-spacer />
        <v-btn flat @click="proceed" :disabled="!proceedAnyway">Proceed anyway</v-btn>
        <v-btn flat @click="giveMeAnOtherChance">Give me an other chance</v-btn>
      </v-card-actions>
    </v-card>
  </v-dialog>
</section>