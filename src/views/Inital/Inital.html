<section class="inital">
  <v-progress-linear style="position:fixed; top:0; left: 0;" class="ma-0" indeterminate v-if="nameCheckStatus.checking">
  </v-progress-linear>
  <v-layout justify-center>
    <v-flex md8>
      <v-card>
        <v-toolbar class="primary">
          <h1 class="headline white--text text-xs-center fw">
            Identify yourself
          </h1>
        </v-toolbar>
        <v-form v-model="valid" @submit.prevent="registerOrLogim">
          <v-card-text>
              <v-stepper v-if="firstvisit" class="elevation-0" flat>
                  <v-stepper-header class="elevation-0">
                    <v-stepper-step color="accent" step="1">Personal info</v-stepper-step>
                    <v-divider></v-divider>
                    <v-stepper-step color="accent" step="2">Your key</v-stepper-step>
                    <v-divider></v-divider>
                    <v-stepper-step color="accent" step="3">Finishing</v-stepper-step>
                  </v-stepper-header>
              </v-stepper>
            <p class="subheading" style="width:50%; margin: auto; padding-bottom: 30px;" v-if="firstvisit">
                Hi!
                <br>
                <br>
                <span class="font-weight-bold">{{appid}}</span><span v-if="!appid">You were redirected by a service that</span> is using the 3bot application for decentralized login. 
                This is a passwordless and fully secure system.
                 Not a single person in the world will be able to login to your account (not even us). 
                 Please choose a name, which will later be the address of your digital avatar on the web.
                 <br>
                 <br>
                 <a target="_blank" href="https://www.youtube.com/embed/4exjbFvnGkk">More info.</a>
            </p>
            <p class="subheading" v-if="!firstvisit">
                Hi! What is your 3bot name?
            </p>
            <v-text-field @input="checkName(doubleName)" :disabled="nameCheckStatus.checking" :rules="nameRules" autofocus v-model="doubleName" box
              label="Name" :hint="`Your 3bot address: ${doubleName}.3bot`" required></v-text-field>
              <br><p v-if="doubleName"></p>
          </v-card-text>
          <v-card-actions>
            <v-spacer></v-spacer>
            <p v-if="!nameCheckStatus.checking && valid">{{nameCheckStatus.available ? "This account doesn't exist yet." :  "This account already exists."}}</p>
            <v-btn type="submit" flat :disabled="nameCheckStatus.checking || !valid">{{nameCheckStatus.available ? "Register" :  "Sign in"}}</v-btn>
          </v-card-actions>
        </v-form>
      </v-card>
    </v-flex>
  </v-layout>

  <v-dialog v-model="continueToLogin" width="700">
    <v-card>
      <v-toolbar class="primary">
        <h1 class="headline white--text text-xs-center fw">
          Do you want to log in?
        </h1>
      </v-toolbar>
      <v-card-text>
        <p class="subheading">This accountname is already known.</p>
        <p class="subheading">Do you want to log in with {{doubleName}}.3bot?</p>
      </v-card-text>
      <v-card-actions>
        <v-spacer />
        <v-btn flat @click="continueToLogin = false">No</v-btn>
        <v-btn flat @click="login">Yup</v-btn>
      </v-card-actions>
    </v-card>
  </v-dialog>
</section>